<html>
    <head>
        <title>Test Page</title>
    </head>
    <body>
        <div id = "console">
        </div>
        <script type = "text/javascript" src = "https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js">
        </script>
        <script type = "text/javascript" src = "../trialtool/js/ConsoleHelper.js">
        </script>
        <script type = "text/javascript">
            /*Pre Requisites*/
            
            window.indexedDB = window.moz_indexedDB || window.webkitIndexedDB;
            var DAO = {};
            
            document.write("Trying to open database ...");
            var request = window.indexedDB.open("BookShop", "My Book Shop Database");
            request.onsuccess = function(event){
                write("Dataase opened");
                DAO.db = event.result;
                DAO.newTransactionObjectStore = function(){
                    try {
                        var transaction = DAO.db.transaction(["BookList"], 0 /*Read-Write*/, 1000 /*Time out in ms*/);
                        transaction.oncomplete = function(e){
                            document.write("===== Transaction Complete");
                        };
                        transaction.onabort = function(e){
                            document.write("===== Transaction Aborted", e);
                        };
                        DAO.objectStore = transaction.objectStore("BookList");
                        document.write("==== New Transaction", DAO.objectStore);
                    } 
                    catch (e) {
                        write("Could not open objectStore. You may have to create it first");
                        writeError(e);
                    }
                };
                DAO.newTransactionObjectStore();
                var request = DAO.objectStore.clear();
                request.onsuccess = function(e){
                    write(e.result);
                };
				request.onerror = function(e){
					writeError(e)
				}
            };
        </script>
    </body>
</html>
